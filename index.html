<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scroll Showcase Demo</title>

    <!-- 1) GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Poppins", sans-serif;
      }
      main {
        width: 100%;
        position: relative;
      }
      .image-container {
        position: fixed;
        bottom: -70%;
        right: -10%;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 599;
        opacity: 0;
      }

      .image-container.active {
        position: absolute !important;
        bottom: 0 !important;
        right: 50%;
        transform: translateX(50%) translateY(-20px) !important;
        width: fit-content;
        height: fit-content;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 599;
      }
      .image-container img {
        width: 700px;
        height: auto;
        object-fit: cover;
      }
      .extra-div {
        width: 100%;
        height: 100vh;
        background-color: #ff7f6e;
      }
      .container {
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        padding: 2rem;
      }
      .container-1 {
        background-color: #d7eff8;
      }
      .container-1 .title {
        font-size: 8rem;
        letter-spacing: 2px;
        max-width: 50%;
      }
      .container-1 .desc {
        font-size: 1.2rem;
        max-width: 50%;
      }

      .container-2 {
        background-color: #d7eff8;
      }
      .container-2 .title {
        font-size: 4rem;
        letter-spacing: 2px;
        max-width: 60%;
      }
      .container-2 .desc {
        font-size: 1rem;
        max-width: 60%;
        display: none;
      }
      .container-2 .feature-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 2rem;
        margin-top: 2rem;
      }

      .container-2 .feature-item {
        place-items: center;
      }

      .container-2 .icon-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 2px solid #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 0.75rem;
      }

      .container-2 .icon {
        width: 36px;
        height: 36px;
        color: #555;
      }
      .container-2 ul {
        list-style-type: none;
        line-height: 170%;
      }

      .container-3 {
        background-color: #d7eff8;
      }
      .container-3 .title {
        font-size: 4rem;
        letter-spacing: 2px;
        max-width: 70%;
      }
      .container-3 .desc {
        font-size: 1rem;
        max-width: 70%;
      }
      .container-3 ul {
        list-style-type: none;
        margin-top: 1rem;
      }

      .container-4 {
        background-color: #d7eff8;
        position: relative;
      }
      .container-4 .circle {
        border: 2px solid #000;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        position: absolute;
      }
      .container-4 .circle:nth-child(1) {
        top: 20%;
        left: 25%;
      }
      .container-4 .circle:nth-child(2) {
        top: 50%;
        left: 15%;
      }
      .container-4 .circle:nth-child(3) {
        top: 80%;
        left: 25%;
      }
      .container-4 .circle:nth-child(4) {
        top: 80%;
        right: 25%;
      }
      .container-4 .circle:nth-child(5) {
        top: 50%;
        right: 15%;
      }
      .container-4 .circle:nth-child(6) {
        top: 20%;
        right: 25%;
      }

      .container-5 {
        background-color: #dfe7f8;
        position: relative;
      }
      .container-5 .title {
        font-size: 4rem;
        letter-spacing: 1px;
        display: none;
      }
      .container-5 .desc {
        font-size: 1rem;
        margin-top: 0.5rem;
        display: none;
        position: relative;
      }
      .container-5::after {
        content: "";
        position: absolute;
        bottom: 10px; /* Move it closer to the base of the machine */
        left: 50%;
        transform: translateX(-50%) scaleX(1.5); /* Center and flatten */
        width: 40%;
        height: 90px;
        border-radius: 50%;
        background: radial-gradient(
          ellipse at center,
          rgba(0, 0, 0, 0.25) 0%,
          transparent 70%
        );
        filter: blur(10px);
        z-index: 0;
      }
      .container-5 img.one {
        width: 250px;
        height: auto;
        position: absolute;
        bottom: 50px;
        right: 25%;
        transform: scaleX(-1);
        z-index: 1;
      }
      .container-5 img.two {
        width: 250px;
        height: auto;
        position: absolute;
        bottom: 50px;
        left: 25%;
        transform: scaleX(1);
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <main class="showcase-section">
      <!-- Image to animate -->
      <div class="image-container">
        <img src="./machine.png" alt="Machine" />
      </div>

      <!-- Sections -->
      <section class="container container-1">
        <h2 class="title">AestheTech™</h2>
        <p class="desc">
          Indulge in the future of personal care with AestheTech™ — a
          multi-functional beauty machine engineered for skin rejuvenation, body
          sculpting, and holistic well-being. Trusted by professionals,
          perfected for home.
        </p>
      </section>

      <section class="container container-2">
        <h2 class="title">Precision Meets Pampering</h2>
        <p class="desc">Unlock a spa-like experience with just one device</p>

        <div class="feature-grid">
          <div class="feature-item">
            <div class="icon-circle">
              <!-- Massage Mode: Hand Raised Icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M7.5 3a1.5 1.5 0 0 1 1.5 1.5v9.5h1V2.75a.75.75 0 0 1 1.5 0V14h1V3.25a.75.75 0 0 1 1.5 0V14h.5A2.5 2.5 0 0 1 17 16.5v.25c0 .22-.03.43-.1.63l-1.5 4.25a.75.75 0 0 1-1.4 0l-.85-2.42h-.7l-.85 2.42a.75.75 0 0 1-1.4 0L8.1 17.38a.75.75 0 0 1-.1-.38V4.5A1.5 1.5 0 0 1 7.5 3z"
                />
              </svg>
            </div>
            <p>Massage Mode</p>
          </div>

          <div class="feature-item">
            <div class="icon-circle">
              <!-- Laser Glow: Sparkles -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 2.25a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 12 2.25zm6.364 3.386a.75.75 0 0 1 1.06 1.06l-1.06 1.06a.75.75 0 0 1-1.06-1.06l1.06-1.06zM18.75 12a.75.75 0 0 1 .75.75h1.5a.75.75 0 0 1 0 1.5H19.5a.75.75 0 0 1-.75-.75V12zm-6.75 6a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 12 18zm-6.364-2.136a.75.75 0 0 1 0-1.06l1.06-1.06a.75.75 0 0 1 1.06 1.06l-1.06 1.06a.75.75 0 0 1-1.06 0z"
                />
              </svg>
            </div>
            <p>Laser Glow</p>
          </div>

          <div class="feature-item">
            <div class="icon-circle">
              <!-- CryoTight: Snowflake -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M12 2.25a.75.75 0 0 1 .75.75v5.067l2.603-2.602a.75.75 0 1 1 1.061 1.06l-3.664 3.665V12l3.664 3.664a.75.75 0 1 1-1.061 1.061L12.75 13.683V18.75a.75.75 0 0 1-1.5 0v-5.067l-2.603 2.603a.75.75 0 1 1-1.061-1.061L10.25 12l-3.664-3.664a.75.75 0 0 1 1.061-1.061l2.603 2.603V3A.75.75 0 0 1 12 2.25z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <p>CryoTight</p>
          </div>

          <div class="feature-item">
            <div class="icon-circle">
              <!-- ThermoSlim: Fire -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 2c1.57 0 3 1.307 3 3.333 0 .823-.25 1.31-.707 2.085-.464.787-1.05 1.814-.293 2.915C14.655 11.263 15.5 13.032 15.5 15A3.5 3.5 0 0 1 12 18.5 3.5 3.5 0 0 1 8.5 15c0-1.968.845-3.737 1.5-4.667.757-1.101.171-2.128-.293-2.915C9.25 7.31 9 6.823 9 6C9 3.86 10.43 2 12 2z"
                />
              </svg>
            </div>
            <p>ThermoSlim</p>
          </div>

          <div class="feature-item">
            <div class="icon-circle">
              <!-- App Integration: Device Icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M6 2.25A2.25 2.25 0 0 0 3.75 4.5v15A2.25 2.25 0 0 0 6 21.75h12A2.25 2.25 0 0 0 20.25 19.5v-15A2.25 2.25 0 0 0 18 2.25H6zm0 1.5h12c.414 0 .75.336.75.75v15a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75v-15c0-.414.336-.75.75-.75zM12 18.25a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"
                />
              </svg>
            </div>
            <p>App Sync</p>
          </div>
        </div>
      </section>

      <section class="container container-3">
        <h2 class="title">See the Difference, Feel the Change</h2>
        <p class="desc">
          Whether you're a busy professional, wellness enthusiast, or beauty
          entrepreneur:
        </p>
        <ul>
          <li>Before &amp; After: Visible improvements in just 2 weeks.</li>
          <li>Home-Friendly: Compact, quiet, and easy to operate.</li>
          <li>
            Multi-Zone Capable: Face, arms, thighs, abs — one tool, total
            coverage.
          </li>
          <li>Trusted by Experts: Used in clinics, loved at home.</li>
        </ul>
      </section>

      <section class="container container-4">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
      </section>

      <section class="container container-5">
        <h2 class="title">Radiance, Every Day</h2>
        <p class="desc">
          Elevate your routine with AestheTech™—transform your skin and body
          with one integrated device.
        </p>
        <img class="one" src="./machine.png" alt="Machine" />
        <img class="two" src="./machine.png" alt="Machine" />
      </section>
    </main>

    <!-- Extra content to scroll into -->
    <section class="extra-div"></section>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      const containerStates = [
        {
          bottom: "-70%",
          right: "-10%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "-40%",
          right: "-20%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "-20%",
          right: "-30%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "50%",
          right: "50%",
          position: "fixed",
          xPercent: 50,
          yPercent: 50,
        },
        {
          bottom: "50%",
          right: "50%",
          position: "fixed",
          xPercent: 50,
          yPercent: 50,
        },
      ];
      const imgStates = [
        { width: 700 },
        { width: 500 },
        { width: 400 },
        { width: 300 },
        { width: 300 },
      ];

      const sections = document.querySelectorAll(".container");

      sections.forEach((sec, i) => {
        // skip the very first section since there's no "previous" state for it
        if (i === 0) return;

        // from state (i-1) → to state (i)
        gsap.fromTo(".image-container", containerStates[i - 1], {
          ...containerStates[i],
          scrollTrigger: {
            trigger: sec,
            start: "top bottom",
            end: "top top",
            scrub: true,
            pin: false,
            snap: {
              snapTo: 1, // snaps to 0, 0.25, 0.5, 0.75, 1 (4 panels)
              duration: 1, // duration of the snap
              ease: "power1.inOut", // easing during snap
            },
          },
        });

        // same for the img width
        gsap.fromTo(
          ".image-container img",
          { width: imgStates[i - 1].width + "px" },
          {
            width: imgStates[i].width + "px",
            scrollTrigger: {
              trigger: sec,
              start: "top bottom",
              end: "top top",
              scrub: true,
            },
          }
        );
      });

      ScrollTrigger.create({
        trigger: ".showcase-section",
        start: "bottom bottom", // when container’s bottom crosses 90% down the viewport
        onEnter: () => activeStyle(true),
        onLeaveBack: () => activeStyle(false),
      });

      function activeStyle(active) {
        const el = document.querySelector(".image-container");
        if (active) {
          el.classList.add("active");
        } else {
          el.classList.remove("active");
        }
      }

      gsap.fromTo(
        ".container-1 .title, .container-1 .desc",
        {
          opacity: 0,
          x: -2000,
        },
        {
          opacity: 1,
          x: 0,
          duration: 3,
          ease: "power2.out",
          stagger: 0.2,
          scrollTrigger: {
            trigger: ".container-1",
            start: "top 56%",
            toggleActions: "play none none none",
            once: true,
          },
        }
      );
    </script>
  </body>
  <script>
    window.addEventListener("load", () => {
      // write me code to make opacity 0 to 1 on the image container
      const imageContainer = document.querySelector(".image-container");
      imageContainer.style.opacity = "1";

      gsap.registerPlugin(ScrollTrigger);

      const containerStates = [
        {
          bottom: "-70%",
          right: "-10%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "-40%",
          right: "-20%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "-20%",
          right: "-30%",
          position: "fixed",
          xPercent: 0,
          yPercent: 0,
        },
        {
          bottom: "50%",
          right: "50%",
          position: "fixed",
          xPercent: 50,
          yPercent: 50,
        },
        {
          bottom: "50%",
          right: "50%",
          position: "fixed",
          xPercent: 50,
          yPercent: 50,
        },
      ];
      const imgStates = [
        { width: 700 },
        { width: 500 },
        { width: 400 },
        { width: 300 },
        { width: 300 },
      ];

      const sections = document.querySelectorAll(".container");

      sections.forEach((sec, i) => {
        if (i === 0) return;

        gsap.fromTo(".image-container", containerStates[i - 1], {
          ...containerStates[i],
          scrollTrigger: {
            trigger: sec,
            start: "top bottom",
            end: "top top",
            scrub: true,
            pin: false,
            snap: {
              snapTo: 1,
              duration: 1,
              ease: "power1.inOut",
            },
          },
        });

        gsap.fromTo(
          ".image-container img",
          { width: imgStates[i - 1].width + "px" },
          {
            width: imgStates[i].width + "px",
            scrollTrigger: {
              trigger: sec,
              start: "top bottom",
              end: "top top",
              scrub: true,
            },
          }
        );
      });

      ScrollTrigger.create({
        trigger: ".showcase-section",
        start: "bottom bottom",
        onEnter: () => activeStyle(true),
        onLeaveBack: () => activeStyle(false),
      });

      function activeStyle(active) {
        const el = document.querySelector(".image-container");
        if (active) {
          el.classList.add("active");
        } else {
          el.classList.remove("active");
        }
      }

      gsap.fromTo(
        ".container-1 .title, .container-1 .desc",
        {
          opacity: 0,
          x: -2000,
        },
        {
          opacity: 1,
          x: 0,
          duration: 3,
          ease: "power2.out",
          stagger: 0.2,
          scrollTrigger: {
            trigger: ".container-1",
            start: "top 56%",
            toggleActions: "play none none none",
            once: true,
          },
        }
      );

      // 5th section images
      const animOne = gsap.fromTo(
        ".container-5 .one",
        { opacity: 0, x: -300 },
        {
          opacity: 1,
          x: 0,
          duration: 3,
          ease: "power2.out",
          paused: true, // important: prevent auto run
        }
      );

      const animTwo = gsap.fromTo(
        ".container-5 .two",
        { opacity: 0, x: 300 },
        {
          opacity: 1,
          x: 0,
          duration: 3,
          ease: "power2.out",
          paused: true,
        }
      );

      // ScrollTrigger
      ScrollTrigger.create({
        trigger: ".container-5",
        start: "top 15%",
        onEnter: () => {
          animOne.restart();
          animTwo.restart();
        },
        onEnterBack: () => {
          animOne.restart();
          animTwo.restart();
        },
        onLeave: () => {
          animOne.pause(0); // reset to start
          animTwo.pause(0);
        },
        onLeaveBack: () => {
          animOne.pause(0);
          animTwo.pause(0);
        },
      });

      window.scrollBy(0, 1);
      ScrollTrigger.refresh();
    });

    window.addEventListener("resize", ScrollTrigger.refresh);
  </script>
</html>
